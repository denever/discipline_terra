{% extends "invoices/base-invoices.html" %}
{% load i18n %}
{% block container %}
<h3>{% trans "Order" %}</h3>
<p>
  <a type="button" class="btn btn-default btn-xs" href="{% url 'order-invoice' order.id %}">
    <span class="glyphicon glyphicon-shopping-cart"></span>
  </a>
  <a type="button" class="btn btn-default btn-xs"  href="{% url 'order-delete' order.id %}">
    <span class="glyphicon glyphicon-trash"></span>
  </a>
</p>
<table class="table table-hover">
  <tbody>
    <tr>
      <td>{% trans "Customer" %}</td><td>{{order.customer}}</td>
    </tr>
    <tr>
      <td>{% trans "Items count" %}</td><td>{{order.item_count}}</td>
    </tr>
    <tr>
      <td>{% trans "Total value" %}</td><td>{{order.total_value}} €</td>
    </tr>
    <tr>
      <td>{% trans "Last change by" %}</td><td>{{order.lastchange_by}}</td>
    </tr>
    <tr>
      <td>{% trans "Last change on" %}</td><td>{{order.lastchange}}</td>
    </tr>
  </tbody>
</table>
<p>
  <a href="{% url 'item-create' order.id %}"><span class="glyphicon glyphicon-plus"></span>{% trans "New item" %}</a>
</p>
<h3>{% trans "Items" %}</h3>
<table class="table table-hover table-bordered">
  <thead>
    <tr>
      <td>{% trans "Product" %}</td>
      <td>{% trans "Price" %}</td>
      <td>{% trans "Pieces" %}</td>
      <td>{% trans "Total" %}</td>
    </tr>
  </thead>
  <tbody>
    {% for item in order.item_set.all %}
    <tr>
      <td>{{item.price.product}}</td>
      <td>{{item.price.price_out}} €</td>
      <td>{{item.pieces}}
	{% if item.as_packages != "N/A" %}
	(packages {{item.as_packages.0}} and {{item.as_packages.1}} pieces)
	{% endif %}</td>
      <td>{{item.value}} €</td>
      <td>
	<a type="button" class="btn btn-default btn-xs" href="{% url 'item-edit' order.id item.id %}">
	  <span class="glyphicon glyphicon-edit"></span>
	</a>
	<a type="button" class="btn btn-default btn-xs"  href="{% url 'item-delete' order.id item.id %}">
	  <span class="glyphicon glyphicon-trash"></span>
	</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
